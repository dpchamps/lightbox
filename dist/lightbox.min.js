/*! lightbox 16-11-2016 */
require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var Modernizr=require("./lib/Modernizr"),ModernizrProto=require("./lib/ModernizrProto"),classes=require("./lib/classes"),testRunner=require("./lib/testRunner"),setClasses=require("./lib/setClasses");testRunner(),setClasses(classes),delete ModernizrProto.addTest,delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++)Modernizr._q[i]();module.exports=Modernizr},{"./lib/Modernizr":2,"./lib/ModernizrProto":3,"./lib/classes":4,"./lib/setClasses":8,"./lib/testRunner":9}],2:[function(require,module,exports){var ModernizrProto=require("./ModernizrProto.js"),Modernizr=function(){};Modernizr.prototype=ModernizrProto,Modernizr=new Modernizr,module.exports=Modernizr},{"./ModernizrProto.js":3}],3:[function(require,module,exports){var tests=require("./tests.js"),ModernizrProto={_version:"3.2.0 (browsernizr 2.0.1)",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(test,cb){var self=this;setTimeout(function(){cb(self[test])},0)},addTest:function(name,fn,options){tests.push({name:name,fn:fn,options:options})},addAsyncTest:function(fn){tests.push({name:null,fn:fn})}};module.exports=ModernizrProto},{"./tests.js":10}],4:[function(require,module,exports){var classes=[];module.exports=classes},{}],5:[function(require,module,exports){var docElement=document.documentElement;module.exports=docElement},{}],6:[function(require,module,exports){function is(obj,type){return typeof obj===type}module.exports=is},{}],7:[function(require,module,exports){var docElement=require("./docElement.js"),isSVG="svg"===docElement.nodeName.toLowerCase();module.exports=isSVG},{"./docElement.js":5}],8:[function(require,module,exports){function setClasses(classes){var className=docElement.className,classPrefix=Modernizr._config.classPrefix||"";if(isSVG&&(className=className.baseVal),Modernizr._config.enableJSClass){var reJS=new RegExp("(^|\\s)"+classPrefix+"no-js(\\s|$)");className=className.replace(reJS,"$1"+classPrefix+"js$2")}Modernizr._config.enableClasses&&(className+=" "+classPrefix+classes.join(" "+classPrefix),isSVG?docElement.className.baseVal=className:docElement.className=className)}var Modernizr=require("./Modernizr.js"),docElement=require("./docElement.js"),isSVG=require("./isSVG.js");module.exports=setClasses},{"./Modernizr.js":2,"./docElement.js":5,"./isSVG.js":7}],9:[function(require,module,exports){function testRunner(){var featureNames,feature,aliasIdx,result,nameIdx,featureName,featureNameSplit;for(var featureIdx in tests)if(tests.hasOwnProperty(featureIdx)){if(featureNames=[],feature=tests[featureIdx],feature.name&&(featureNames.push(feature.name.toLowerCase()),feature.options&&feature.options.aliases&&feature.options.aliases.length))for(aliasIdx=0;aliasIdx<feature.options.aliases.length;aliasIdx++)featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());for(result=is(feature.fn,"function")?feature.fn():feature.fn,nameIdx=0;nameIdx<featureNames.length;nameIdx++)featureName=featureNames[nameIdx],featureNameSplit=featureName.split("."),1===featureNameSplit.length?Modernizr[featureNameSplit[0]]=result:(!Modernizr[featureNameSplit[0]]||Modernizr[featureNameSplit[0]]instanceof Boolean||(Modernizr[featureNameSplit[0]]=new Boolean(Modernizr[featureNameSplit[0]])),Modernizr[featureNameSplit[0]][featureNameSplit[1]]=result),classes.push((result?"":"no-")+featureNameSplit.join("-"))}}var tests=require("./tests.js"),Modernizr=require("./Modernizr.js"),classes=require("./classes.js"),is=require("./is.js");module.exports=testRunner},{"./Modernizr.js":2,"./classes.js":4,"./is.js":6,"./tests.js":10}],10:[function(require,module,exports){var tests=[];module.exports=tests},{}],11:[function(require,module,exports){var Modernizr=require("./../../lib/Modernizr.js");Modernizr.addTest("promises",function(){return"Promise"in window&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise&&function(){var resolve;return new window.Promise(function(r){resolve=r}),"function"==typeof resolve}()})},{"./../../lib/Modernizr.js":2}],12:[function(require,module,exports){!function(name,definition){"undefined"!=typeof module?module.exports=definition():"function"==typeof define&&"object"==typeof define.amd?define(definition):this[name]=definition()}("domready",function(){var fns=[],listener,doc=document,hack=doc.documentElement.doScroll,domContentLoaded="DOMContentLoaded",loaded=(hack?/^loaded|^c/:/^loaded|^i|^c/).test(doc.readyState);return loaded||doc.addEventListener(domContentLoaded,listener=function(){for(doc.removeEventListener(domContentLoaded,listener),loaded=1;listener=fns.shift();)listener()}),function(fn){loaded?setTimeout(fn,0):fns.push(fn)}})},{}],13:[function(require,module,exports){function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var timeout=setTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,clearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],14:[function(require,module,exports){"use strict";var disableDefault=function(){this.events.add(function disableDefault(e){e.preventDefault()})};module.exports=disableDefault},{}],15:[function(require,module,exports){"use strict";var imageDbltap=function(){var lightbox=this;lightbox.events.add(function dbltapListener(e){var img=e.target,currentZoom=lightbox.transform.getXScale(img),minZoomScale=lightbox.transform.getMinZoom(img),targetZoom=currentZoom>1?1:minZoomScale,zoomScale=.5*(targetZoom-currentZoom),cX=img.getBoundingClientRect().width/2,cY=img.getBoundingClientRect().height/2,interval=setInterval(function(){var matrix=lightbox.transform.getImageTransformMatrix(img,zoomScale,cX,cY);currentZoom=lightbox.transform.getXScale(img),matrix[0]>targetZoom?(matrix[0]=targetZoom,matrix[3]=targetZoom,matrix[4]=0,matrix[5]=0,lightbox.transform.transformImage(img,matrix),clearInterval(interval)):(currentZoom+zoomScale>=lightbox.transform.maxZoom||currentZoom+zoomScale<=lightbox.transform.minZoom)&&clearInterval(interval),lightbox.transform.transformImage(img,matrix)},15)})};module.exports=imageDbltap},{}],16:[function(require,module,exports){"use strict";var imageHold=function(){function translateImageStart(img,x,y){var initialMatrix=lightbox.transform.getElMatrix(img);if(lightbox.nav.imageCycle()){var next=lightbox.modal("next")[0],nextMatrix,prev=lightbox.modal("prev")[0],prevMatrix;next.complete&&(nextMatrix=lightbox.transform.getElMatrix(next)),prev.complete&&(prevMatrix=lightbox.transform.getElMatrix(prev))}lightbox.events.add(function translateMouseMove(e){var nX=e.x||e.clientX,nY=e.y||e.clientY;lightbox.transform.translateImage(img,x,y,nX,nY,initialMatrix),nextMatrix&&lightbox.transform.translateImage(next,x,y,nX,nY,nextMatrix),prevMatrix&&lightbox.transform.translateImage(prev,x,y,nX,nY,prevMatrix)}),lightbox.events.add(function translateTouchMove(e){e.touches.length>1&&img.removeEventListener("touchmove",lightbox.events.get("translateTouchMove")),lightbox.transform.translateImage(img,x,y,e.touches[0].clientX,e.touches[0].clientY,initialMatrix),nextMatrix&&lightbox.transform.translateImage(next,x,y,e.touches[0].clientX,e.touches[0].clientY,nextMatrix),prevMatrix&&lightbox.transform.translateImage(prev,x,y,e.touches[0].clientX,e.touches[0].clientY,prevMatrix)}),img.addEventListener("mousemove",lightbox.events.get("translateMouseMove")),img.addEventListener("touchmove",lightbox.events.get("translateTouchMove"))}var lightbox=this;lightbox.events.add(function holdListener(e){translateImageStart(e.target,e.x,e.y)})};module.exports=imageHold},{}],17:[function(require,module,exports){"use strict";var imageHoldRelease=function(){var lightbox=this;lightbox.events.add(function holdreleaseListener(e){var el=e.target,box=el.getBoundingClientRect(),navTarget=.7*window.innerWidth,distance=Math.abs(e.originalX-e.lastX),transitionFired=!1;if(lightbox.nav.imageCycle())var next=lightbox.modal("next")[0],nextMatrix=lightbox.transform.getElMatrix(next),prev=lightbox.modal("prev")[0],prevMatrix=lightbox.transform.getElMatrix(prev);if(box.right<=navTarget&&distance>150&&(lightbox.nav.next(),transitionFired=!0),box.left>=navTarget/2&&distance>150&&(lightbox.nav.prev(),transitionFired=!0),box.width<window.innerWidth&&box.height<window.innerHeight&&navTarget>distance&&transitionFired===!1)var matrix=lightbox.transform.getElMatrix(el),moveBy=matrix[4]/5,moveInterval=setInterval(function(){matrix[4]=matrix[4]-moveBy,0>moveBy&&matrix[4]>0&&(matrix[4]=0),moveBy>0&&matrix[4]<0&&(matrix[4]=0),lightbox.transform.transformImage(el,matrix),nextMatrix&&(nextMatrix[4]=nextMatrix[4]-moveBy,lightbox.transform.transformImage(next,nextMatrix)),prevMatrix&&(prevMatrix[4]=prevMatrix[4]-moveBy,lightbox.transform.transformImage(prev,prevMatrix)),Math.abs(matrix[4])<=0&&clearInterval(moveInterval)},15);el.removeEventListener("mousemove",lightbox.events.get("translateMouseMove")),el.removeEventListener("touchmove",lightbox.events.get("translateTouchMove")),lightbox.events.remove("translateTouchMove"),lightbox.events.remove("translateMouseMove")})};module.exports=imageHoldRelease},{}],18:[function(require,module,exports){"use strict";var imagePinch=function(){var lightbox=this;lightbox.events.add(function pinchListener(e){var img=e.target,zoomScale=(e.distance-e.initialPinch.distance)/250,cX=e.midPoint.x,cY=e.midPoint.y,oX=e.initialPinch.midPoint.x,oY=e.initialPinch.midPoint.y,matrix=lightbox.transform.getImageTransformMatrix(img,zoomScale,cX,cY),initialMatrix=lightbox.transform.getImageTransformMatrix(img,zoomScale,oX,oY);lightbox.transform.transformImage(img,matrix),lightbox.transform.translateImage(img,oX,oY,cX,cY,initialMatrix)})};module.exports=imagePinch},{}],19:[function(require,module,exports){"use strict";var imageScrollWheel=function(){var lightbox=this;lightbox.events.add(function scrollWheelListener(e){var img=e.target,delta=e.deltaY,zoomScale=-.05;0>delta&&(zoomScale=-1*zoomScale);var matrix=lightbox.transform.getImageTransformMatrix(img,zoomScale,e.offsetX,e.offsetY);lightbox.transform.transformImage(img,matrix)})};module.exports=imageScrollWheel},{}],20:[function(require,module,exports){"use strict";var imageSwipe=function(){var lightbox=this;lightbox.events.add(function swipeListener(e){var quadrant=Math.floor(e.direction.degrees/90%4+1),image=e.target,matrix=lightbox.transform.getElMatrix(image),scale=matrix[0],slideScaleX=e.distance.x,slideScaleY=e.distance.y,isMultipleTouch=e.touches&&e.touches.length>1,threshold=75;if(isMultipleTouch)return!1;if(scale>1.5){if(e.distance.x>threshold&&e.distance.y<=threshold)switch(quadrant){case 1:case 4:lightbox.transform.smoothTranslate(image,5,matrix[4]+slideScaleX,matrix[5],2);break;case 2:case 3:lightbox.transform.smoothTranslate(image,5,matrix[4]-slideScaleX,matrix[5],2)}if(e.distance.y>threshold&&e.distance.x<=threshold)switch(quadrant){case 1:case 2:lightbox.transform.smoothTranslate(image,5,matrix[4],matrix[5]-slideScaleY,4);break;case 3:case 4:lightbox.transform.smoothTranslate(image,5,matrix[4],matrix[5]+slideScaleY,4)}if(e.distance.y>threshold&&e.distance.x>threshold)switch(quadrant){case 1:lightbox.transform.smoothTranslate(image,5,matrix[4]+slideScaleX,matrix[5]-slideScaleY,4);break;case 2:lightbox.transform.smoothTranslate(image,5,matrix[4]-slideScaleX,matrix[5]-slideScaleY,4);break;case 3:lightbox.transform.smoothTranslate(image,5,matrix[4]-slideScaleX,matrix[5]+slideScaleY,4);break;case 4:lightbox.transform.smoothTranslate(image,5,matrix[4]+slideScaleX,matrix[5]+slideScaleY,4)}}})};module.exports=imageSwipe},{}],21:[function(require,module,exports){"use strict";var stopTapProp=function(){this.events.add(function stopTapProp(e){e.stopPropagation()})};module.exports=stopTapProp},{}],22:[function(require,module,exports){"use strict";var thumbTap=function(){var lightbox=this;this.events.add(function thumbTap(e){e.stopPropagation();var img=this.getElementsByTagName("img")[0];lightbox.nav.enter(img)})};module.exports=thumbTap},{}],23:[function(require,module,exports){"use strict";require("./modules/polyfill-checks.js");var lightbox={util:require("./modules/util.js"),events:require("./modules/events.js"),imgCache:require("./modules/imgCache.js"),animate:require("./modules/animations.js"),transform:require("./modules/transform.js"),nav:require("./modules/nav.js"),bindEvents:require("./scripts/bindEvents"),controls:require("./modules/controls.js"),modal:require("./modules/lightboxModal"),init:function(thumbClass){if("undefined"==typeof window.touchme)throw new Error("Lightbox requires touchme.js as a dependency");touchme({holdThreshold:50,swipeThreshold:200,swipePrecision:250,tapPrecision:250,tapThreshold:250,holdPrecision:500}),thumbClass=thumbClass||".thumb",require("./modules/loadEvents.js")(this),this.controls=this.controls();var self=this;require("domready")(function(){self.nav=self.nav(thumbClass),self.bindEvents(thumbClass)})},nodeAppended:null,openLightBox:function(node){var lightboxModal=document.getElementById("lightbox-modal");lightboxModal.style.visibility="visible",document.body.style.overflow="hidden",this.nodeAppended=node,lightboxModal.appendChild(this.nodeAppended)},closeLightBox:function(){var lightboxModal=document.getElementById("lightbox-modal");lightboxModal.style.visibility="hidden",document.body.style.overflow="auto",lightboxModal.removeChild(this.nodeAppended),this.nodeAppended=null},reCache:function(thumbClass){thumbClass=thumbClass||".thumb",this.util(thumbClass).removeEvents("tap",lightbox.events.get("thumbTap")),this.util(thumbClass).addEvents("tap",lightbox.events.get("thumbTap")),this.nav.cacheCycle()}};window.lightbox=lightbox},{"./modules/animations.js":24,"./modules/controls.js":25,"./modules/events.js":26,"./modules/imgCache.js":27,"./modules/lightboxModal":28,"./modules/loadEvents.js":29,"./modules/nav.js":30,"./modules/polyfill-checks.js":31,"./modules/transform.js":32,"./modules/util.js":33,"./scripts/bindEvents":34,domready:12}],24:[function(require,module,exports){"use strict";var translate=function(image){function wait(t,fn){return new Promise(function(res){setTimeout(function(){res(fn)},t)})}function waterfall(){if(timedFunctions.length>0){var timedFn=timedFunctions.shift();return wait(timedFn.t,timedFn.fn).then(function(fn){fn(),waterfall()})}complete(image)}function stack(t,fn){var timedFn={t:t,fn:fn};timedFunctions.push(timedFn)}var timedFunctions=[],complete,done=new Promise(function(res){complete=res});return{slideRight:function(){var idx;return stack(0,function(){image.classList.add("pictureSlideRight"),idx=image.dataset.idx}),stack(325,function(){image.classList.remove("pictureSlideRight"),image.classList.add("hidden"),image.style.transform="translateX(0)"}),this},slideLeft:function(){var idx;return stack(0,function(){image.classList.add("pictureSlideLeft"),idx=image.dataset.idx}),stack(325,function(){image.classList.remove("pictureSlideLeft"),image.classList.add("hidden"),image.style.transform="translateX(0)"}),this},center:function(){return stack(0,function(){image.style.transition="all 250ms",image.style.transform="scale(1,1)"}),stack(325,function(){}),this},start:function(){return waterfall(),done}}};module.exports=translate},{}],25:[function(require,module,exports){"use strict";var controls=function(){var modal=document.createElement("div"),spinner=document.createElement("div"),spinnerCube1="<div class='cube1'></div>",spinnerCube2="<div class='cube2'></div>",controls=document.createElement("div"),controlsRemove="<span class='glyphicon glyphicon-remove lightbox-controls-remove'></span>",controlsLeft="<span class='glyphicon glyphicon-chevron-left hidden-xs lightbox-controls-left'></span>",controlsRight="<span class='glyphicon glyphicon-chevron-right hidden-xs lightbox-controls-right'></span>";return spinner.innerHTML=spinnerCube1+spinnerCube2,spinner.classList.add("spinner"),controls.innerHTML=controlsRemove+controlsLeft+controlsRight,controls.classList.add("lightbox-controls"),modal.appendChild(spinner),modal.appendChild(controls),modal.id="lightbox-modal",document.body.insertBefore(modal,document.body.firstChild),{left:document.getElementsByClassName("lightbox-controls-left")[0],right:document.getElementsByClassName("lightbox-controls-right")[0],remove:document.getElementsByClassName("lightbox-controls-remove")[0],modal:document.getElementById("lightbox-modal")}};module.exports=controls},{}],26:[function(require,module,exports){"use strict";var events={_eventHash:{},_nameRef:{},_id:0};events.idExists=function(id){var exists=!1;return this._eventHash.hasOwnProperty(id)&&(exists=!0),exists},events.getById=function(id){if(!events._eventHash.hasOwnProperty(id))throw new Error(id+" doesn't exist");return events._eventHash[id]},events.getId=function(name){if(!this._nameRef.hasOwnProperty(name))throw new Error(name+" doesn't exist");return this._nameRef[name]},events.getByName=function(name){var id=events.getId(name);return events._eventHash[id]},events.add=function(handler){if("function"!=typeof handler)throw new Error("Expected type function for handler");var referenceId=events._id,funcName=handler.name,hasName="undefined"!=typeof funcName&&""!==funcName;if(hasName){if(events._nameRef.hasOwnProperty(funcName))throw new Error("Function already exists by name "+funcName);events._nameRef[funcName]=referenceId}return events._eventHash[referenceId]=handler,events._id+=1,hasName?funcName:referenceId},events.get=function(handler){var func;switch(typeof handler){case"string":try{func=events.getByName(handler)}catch(e){func=events.getById(parseInt(handler,10))}break;case"number":func=events.getById(handler);break;default:throw new Error("Expected string or number, received: "+typeof handler)}return func},events.remove=function(handler){var func,id;switch(typeof handler){case"string":try{id=events.getId(handler),delete events._nameRef[handler]}catch(e){if(!events.idExists(handler))throw new Error(handler+" doesn't exist");id=parseInt(handler,10)}break;case"number":if(!events.idExists(handler))throw new Error(handler+" doesn't exist");id=parseInt(handler,10);break;default:throw new Error("Expected string or number, received: "+typeof handler)}return func=events.getById(id),delete events._eventHash[id],func},events.clear=function(){events._eventHash={},events._nameRef={},events._id=0},module.exports=events},{}],27:[function(require,module,exports){"use strict";var imgCache=function(){function loadImage(src){return new Promise(function(resolve,reject){var image=new Image;image.onload=function(){resolve(image)},image.onerror=function(){reject(image)},image.src=src})}var hasCached=!1,isComplete,processing=!1,promise=new Promise(function(res){isComplete=res});return{cacheImages:function(images){hasCached=!1,processing=!0;var pArray=[];for(var group in images)if(images.hasOwnProperty(group))for(var idx in images[group])if(images[group].hasOwnProperty(idx)){if("last"===idx)continue;pArray.push(loadImage(images[group][idx]))}return Promise.all(pArray).then(function(){hasCached=!0,processing=!1}),promise},complete:function(){return promise},hasCached:function(){return hasCached},processing:function(){return processing},loadImage:function(src){return loadImage(src)}}};module.exports=imgCache()},{}],28:[function(require,module,exports){"use strict";var lightboxModal=function(needle,findType){"undefined"==typeof findType&&(findType="class");var modal=document.getElementById("lightbox-modal");if("undefined"==typeof needle)return modal;var term;switch(findType){case"class":term=modal.getElementsByClassName(needle);break;case"tag":term=modal.getElementsByTagName(needle);break;case"id":term=modal.getElementById(needle);break;default:throw new Error("Unknown query type:",findType)}return term};module.exports=lightboxModal},{}],29:[function(require,module,exports){"use strict";var loadEvents=function(context){require("./../eventlisteners/disableDefault").call(context),require("./../eventlisteners/imageDblTap").call(context),require("./../eventlisteners/imageHold").call(context),require("./../eventlisteners/imageHoldRelease").call(context),require("./../eventlisteners/imagePinch").call(context),require("./../eventlisteners/imageScrollWheel").call(context),require("./../eventlisteners/imageSwipe").call(context),require("./../eventlisteners/stopTapProp").call(context)};module.exports=loadEvents},{"./../eventlisteners/disableDefault":14,"./../eventlisteners/imageDblTap":15,"./../eventlisteners/imageHold":16,"./../eventlisteners/imageHoldRelease":17,"./../eventlisteners/imagePinch":18,"./../eventlisteners/imageScrollWheel":19,"./../eventlisteners/imageSwipe":20,"./../eventlisteners/stopTapProp":21}],30:[function(require,module,exports){"use strict";var nav=function(thumbClass){function cacheCycle(){imageSet={},thumbs=document.querySelectorAll(thumbClass+" img");for(var i=0;i<thumbs.length;i++){var image=thumbs[i],idx=parseInt(image.dataset.idx,10),group=image.dataset.imagegroup;"undefined"==typeof imageSet[group]&&(imageSet[group]={last:0}),imageSet[group][idx]=image.dataset.img,imageSet[group].last=imageSet[group].last<idx?idx:imageSet[group].last}}function disableDrag(el){el.addEventListener("dragstart",disableDefault),el.addEventListener("dragend",disableDefault),el.addEventListener("drag",disableDefault)}function disableTouch(el){el.addEventListener("touchstart",disableDefault),el.addEventListener("touchmove",disableDefault)}function enableTouch(el){el.removeEventListener("touchstart",disableDefault),el.removeEventListener("touchmove",disableDefault)}function lightboxEnter(img){var idx=img.dataset.idx,group=img.dataset.imagegroup,src=imageSet[group][idx];currentGroup=group,lightbox.imgCache.loadImage(src).then(function(image){addImage(idx,image),lightbox.imgCache.hasCached()||lightbox.imgCache.processing()||lightbox.imgCache.cacheImages(imageSet)}),lightboxModal.style.visibility="visible",document.body.style.overflow="hidden"}function lightboxExit(e){if(e.target!==e.currentTarget)return!1;var images=lightboxModal.getElementsByTagName("img");images=Array.prototype.slice.call(images);for(var i=0;i<images.length;i++)"undefined"!=typeof images[i]&&(removeTouchListeners(images[i]),removeImage(images[i]));imageCycle=!1,enableTouch(document),lightboxModal.style.visibility="hidden",document.body.style.overflow="auto"}function addTouchListeners(el){disableDrag(el),disableTouch(document),el.addEventListener("tap",stopTapProp),el.addEventListener("dbltap",dbltapListener),el.addEventListener("hold",holdListener),el.addEventListener("pinch",pinchListener),el.addEventListener("holdrelease",holdreleaseListener),el.addEventListener("wheel",scrollWheelListener),el.addEventListener("swipe",swipeListener)}function removeTouchListeners(el){el.removeEventListener("hold",holdListener),el.removeEventListener("pinch",pinchListener),el.removeEventListener("holdrelease",holdreleaseListener),el.removeEventListener("wheel",scrollWheelListener)}function currentImage(){return lightboxModal.getElementsByClassName("current")[0]}function loadImageCycle(){var nextImage=getImage("next"),prevImage=getImage("prev");imageCycle=!0,cache.loadImage(nextImage.image).then(function(image){addImage(nextImage.idx,image,"next")}),cache.loadImage(prevImage.image).then(function(image){addImage(prevImage.idx,image,"prev")})}function hideImageCycle(){imageCycle=!1;var images=[].slice.call(lightboxModal.getElementsByTagName("img"));images.forEach(function(image){image.classList.contains("current")||removeImage(image)})}function reloadImageCycle(){hideImageCycle(),loadImageCycle()}function addImage(idx,image,position){"undefined"==typeof position&&(position="current"),image.classList.add(position),lightboxModal.appendChild(image),"current"===position&&(lightboxModal.dataset.idx=idx,addTouchListeners(image),reloadImageCycle());var DOMImage=lightboxModal.getElementsByTagName("img")[0];DOMImage.classList.remove("hidden")}function removeImage(image){lightboxModal.removeChild(image)}function getImage(position){var idx=parseInt(lightboxModal.dataset.idx,10),newIdx,nextImg,prevImg,returnObj={};switch(position){case"next":nextImg=imageSet[currentGroup][idx+1],newIdx=idx+1,"undefined"==typeof nextImg&&(nextImg=imageSet[currentGroup][1],newIdx=1),returnObj={image:nextImg,idx:newIdx};break;case"prev":case"previous":prevImg=imageSet[currentGroup][idx-1],newIdx=idx-1,"undefined"==typeof prevImg&&(prevImg=imageSet[currentGroup][imageSet[currentGroup].last],newIdx=imageSet[currentGroup].last),returnObj={image:prevImg,idx:newIdx};break;default:throw new Error("position must be 'next' 'prev' or 'previous'")}return returnObj}function nextImage(e){var next=getImage("next"),curImg=lightboxModal.getElementsByClassName("current")[0],nextImg=next.image,newIdx=next.idx;cache.loadImage(nextImg).then(function(image){var next=image;if(lightbox.animate(curImg).slideLeft().start().then(function(){removeImage(curImg),imageCycle||addImage(newIdx,next)}),imageCycle){removeImage(lightbox.modal("prev")[0]);var nextImage=lightbox.modal("next")[0];lightbox.animate(nextImage).center().start().then(function(){addImage(newIdx,next)})}})}function prevImage(e){var prev=getImage("prev"),curImg=lightboxModal.getElementsByClassName("current")[0],newIdx=prev.idx;cache.loadImage(prev.image).then(function(image){var prev=image;if(lightbox.animate(curImg).slideRight().start().then(function(){removeImage(curImg),imageCycle||addImage(newIdx,prev)}),imageCycle){removeImage(lightbox.modal("next")[0]);var previousImage=lightbox.modal("prev")[0];lightbox.animate(previousImage).center().start().then(function(){addImage(newIdx,prev)})}})}if("undefined"==typeof this)throw new Error("Navigation has no context, call after load");var lightbox=this,thumbs=document.querySelectorAll(thumbClass+" img"),imageSet={},cache=lightbox.imgCache,lightboxModal=document.getElementById("lightbox-modal"),imageCycle=!1,currentGroup;cacheCycle();var holdListener=lightbox.events.get("holdListener"),stopTapProp=lightbox.events.get("stopTapProp"),dbltapListener=lightbox.events.get("dbltapListener"),pinchListener=lightbox.events.get("pinchListener"),holdreleaseListener=lightbox.events.get("holdreleaseListener"),disableDefault=lightbox.events.get("disableDefault"),scrollWheelListener=lightbox.events.get("scrollWheelListener"),swipeListener=lightbox.events.get("swipeListener");return lightbox.imgCache.complete().then(function(){lightbox.modal("spinner")[0].style.visibility="hidden"}),{addImage:addImage,removeImage:removeImage,getImage:function(position){return getImage(position)},addTouchListeners:function(image){addTouchListeners(image)},removeTouchListeners:function(image){removeTouchListeners(image)},next:nextImage,prev:prevImage,exit:lightboxExit,enter:lightboxEnter,imageSet:function(){return imageSet},currentImage:currentImage,imageCycle:function(){return imageCycle},loadImageCycle:loadImageCycle,hideImageCycle:hideImageCycle,cacheCycle:cacheCycle}};module.exports=nav},{}],31:[function(require,module,exports){"use strict";module.exports=function(){require("browsernizr/test/es6/promises.js"),window.Modernizr=require("browsernizr"),Modernizr.promise===!1&&(window.Promise=require("es6-promise").Promise)}()},{browsernizr:1,"browsernizr/test/es6/promises.js":11,"es6-promise":"promise"}],32:[function(require,module,exports){"use strict";var transform={maxZoom:3,minZoom:1};transform.prefix=function(){var testEl=document.createElement("div");if(null===testEl.style.transform||void 0===testEl.style.transform){var vendors=["Webkit","Moz","ms"];for(var vendor in vendors)if(void 0!==testEl.style[vendors[vendor]+"Transform"])return vendors[vendor]+"Transform"}return"transform"}(),transform.round=function(val,decimals){return Number(Math.round(val+"e"+decimals)+"e-"+decimals)},transform.matrixArray=function(matrix){return matrix=matrix.split("(")[1],matrix=matrix.split(")")[0],matrix=matrix.split(","),matrix=matrix.map(parseFloat)},transform.getElMatrix=function(el){return"none"===window.getComputedStyle(el)[this.prefix]&&(el.style[this.prefix]="scale(1,1)"),this.matrixArray(window.getComputedStyle(el)[this.prefix])},transform.getXScale=function(img){return this.round(this.getElMatrix(img)[0],2)},transform.transformImage=function(img,matrix){img.style[this.prefix]="matrix("+matrix.join()+")"},transform.getComputedRect=function(el){var width=parseInt(window.getComputedStyle(el).width.split("px")[0],10),height=parseInt(window.getComputedStyle(el).height.split("px")[0],10);return{width:width,height:height}},transform.getCalcDistance=function(zoomScale,clientX,clientY,img){var rect=img.getBoundingClientRect(),cX=rect.width/2+rect.left,cY=rect.height/2+rect.top,xFromCenter=Math.abs(clientX-cX),yFromCenter=Math.abs(clientY-cY),distance=Math.sqrt(yFromCenter*yFromCenter+xFromCenter*xFromCenter);return distance*zoomScale},transform.cloneZoom=function(img,matrix,newX,newY){var clone=img.cloneNode(!0),newMatrix=matrix.slice(0);return newMatrix[4]=newMatrix[4]+newX,newMatrix[5]=newMatrix[5]+newY,clone.classList.add("clone-hidden"),this.transformImage(clone,newMatrix),clone},transform.zoomBounds=function(img,matrix,xDist,yDist){var clone=this.cloneZoom(img,matrix,xDist,yDist);img.parentNode.appendChild(clone);var rect=clone.getBoundingClientRect(),newX,newY,oldX=matrix[4],oldY=matrix[5],bottom=window.innerHeight-rect.bottom,right=window.innerWidth-rect.right;return newY=rect.height>window.innerHeight?rect.top>0?oldY+(yDist-rect.top):bottom>0?oldY+(yDist+bottom):oldY+yDist:0,newX=rect.width>window.innerWidth?rect.left>0?oldX+(xDist-rect.left):right>0?oldX+(xDist+right):oldX+xDist:0,img.parentNode.removeChild(clone),{x:newX,y:newY}},transform.getMinZoom=function(img){var imgRect=img.getBoundingClientRect(),max=Math.max(imgRect.width,imgRect.height),scalePoint,nextClick=.25;return max===imgRect.height?scalePoint=window.innerHeight/max:max===imgRect.width&&(scalePoint=window.innerWidth/max),this.round(scalePoint+nextClick,2)},transform.getFocusPoint=function(clientX,clientY,img,zoomScale){"undefined"==typeof zoomScale&&(zoomScale=0);var rect=img.getBoundingClientRect(),calcScale=zoomScale>=0?zoomScale+1:zoomScale-1,imgCX=rect.width*calcScale/2,imgCY=rect.height*calcScale/2;return{x:clientX,y:clientY,cX:imgCX+rect.left,cY:imgCY+rect.top}},transform.getNewFocusPoint=function(zoomScale,clientX,clientY,img){var focusPoint=this.getFocusPoint(clientX,clientY,img),xFromCenter=focusPoint.x-focusPoint.cX,yFromCenter=focusPoint.y-focusPoint.cY,dist=Math.sqrt(Math.pow(xFromCenter,2)+Math.pow(yFromCenter,2)),calcDistance=dist*zoomScale,angle=Math.atan2(yFromCenter,xFromCenter),move=calcDistance,newX=focusPoint.x+Math.cos(angle)*move,newY=focusPoint.y+Math.sin(angle)*move;
return{x:newX,y:newY,distanceX:clientX-newX,distanceY:clientY-newY}},transform.getImageTransformMatrix=function(img,zoomScale,clientX,clientY){var transformStyle=window.getComputedStyle(img)[this.prefix];"none"!==transformStyle&&transformStyle&&null!==transformStyle||(img.style[this.prefix]="scale(1,1)",transformStyle=window.getComputedStyle(img)[this.prefix]);var matrix=this.matrixArray(transformStyle),newPoint=this.getNewFocusPoint(zoomScale,clientX,clientY,img);if(matrix[0]+zoomScale<=this.maxZoom&&matrix[0]+zoomScale>=this.minZoom){matrix[0]=matrix[0]+zoomScale,matrix[3]=matrix[3]+zoomScale;var panDistance=this.zoomBounds(img,matrix,newPoint.distanceX,newPoint.distanceY);matrix[4]=panDistance.x,matrix[5]=panDistance.y}else matrix[0]+zoomScale>=this.maxZoom?(matrix[0]=this.maxZoom,matrix[3]=this.maxZoom):matrix[0]+zoomScale<=this.minZoom&&(matrix[0]=this.minZoom,matrix[3]=this.minZoom);return matrix},transform.yAxisBounds=function(image,y,distance,curY){var box=image.getBoundingClientRect(),wHeight=window.innerHeight;return box.height<=wHeight?y:curY+(wHeight-box.bottom)>y+distance?curY:curY-box.top<y+distance?curY:y+distance},transform.translateImage=function(el,oX,oY,nX,nY,initialMatrix){var image=el,distanceScale=.75,xDistance=(nX-oX)*distanceScale,yDistance=(nY-oY)*distanceScale,matrix=this.getElMatrix(el);matrix[4]=initialMatrix[4]+xDistance,matrix[5]=this.yAxisBounds(image,initialMatrix[5],yDistance,matrix[5]),this.transformImage(image,matrix)},transform.smoothTranslate=function(el,ms,x,y,precision){var matrix=this.getElMatrix(el),dX=x-matrix[4],dY=y-matrix[5],angle=Math.atan2(dY,dX),velocity=15,xApproach=!1,yApproach=!1,self=this,moveInterval=setInterval(function(){matrix[4]>=x-precision&&matrix[4]<=x+precision?xApproach=!0:el.getBoundingClientRect().right<=window.innerWidth||el.getBoundingClientRect().left>=0?xApproach=!0:matrix[4]+=Math.cos(angle)*velocity,matrix[5]>=y-precision&&matrix[5]<=y+precision?yApproach=!0:el.getBoundingClientRect().bottom<=window.innerHeight||el.getBoundingClientRect().top>=0?yApproach=!0:matrix[5]+=Math.sin(angle)*velocity,self.transformImage(el,matrix),xApproach&&yApproach&&clearInterval(moveInterval)},ms)},module.exports=transform},{}],33:[function(require,module,exports){"use strict";var util=function(sel){var nodeList=[],getNodes=function(selector){selector=selector.trim();var nodeList=[],delimiter=selector[0],title=selector.split(delimiter)[1];switch(selector[0]){case".":nodeList=document.getElementsByClassName(title);break;case"#":var node=document.getElementById(title);null!==node&&nodeList.push(node)}return nodeList},selectorFunctions={addEvents:function(event,handler){for(var i=0,j=nodeList.length;j>i;i++)nodeList[i].addEventListener(event,handler)},removeEvents:function(event,handler){for(var i=0,j=nodeList.length;j>i;i++)nodeList[i].removeEventListener(event,handler)}},defaultFunctions={},apiFunctions;return"undefined"==typeof sel?apiFunctions=defaultFunctions:(nodeList=getNodes(sel),apiFunctions=selectorFunctions),apiFunctions};module.exports=util},{}],34:[function(require,module,exports){"use strict";var bindEvents=function(thumbClass){if("undefined"===this)throw new Error;require("./../eventlisteners/thumbTap").call(this);var lightbox=this,thumbTap=lightbox.events.get("thumbTap");lightbox.util(thumbClass).addEvents("tap",thumbTap),lightbox.controls.left.addEventListener("tap",lightbox.nav.prev),lightbox.controls.right.addEventListener("tap",lightbox.nav.next),lightbox.controls.remove.addEventListener("tap",lightbox.nav.exit),lightbox.controls.modal.addEventListener("tap",lightbox.nav.exit)};module.exports=bindEvents},{"./../eventlisteners/thumbTap":22}],classList:[function(require,module,exports){"document"in window.self&&("classList"in document.createElement("_")?!function(){"use strict";var testElement=document.createElement("_");if(testElement.classList.add("c1","c2"),!testElement.classList.contains("c2")){var createMethod=function(method){var original=DOMTokenList.prototype[method];DOMTokenList.prototype[method]=function(token){var i,len=arguments.length;for(i=0;len>i;i++)token=arguments[i],original.call(this,token)}};createMethod("add"),createMethod("remove")}if(testElement.classList.toggle("c3",!1),testElement.classList.contains("c3")){var _toggle=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(token,force){return 1 in arguments&&!this.contains(token)==!force?force:_toggle.call(this,token)}}testElement=null}():!function(view){"use strict";if("Element"in view){var classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){for(var i=0,len=this.length;len>i;i++)if(i in this&&this[i]===item)return i;return-1},DOMEx=function(type,message){this.name=type,this.code=DOMException[type],this.message=message},checkTokenAndGetIndex=function(classList,token){if(""===token)throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(token))throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");return arrIndexOf.call(classList,token)},ClassList=function(elem){for(var trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;len>i;i++)this.push(classes[i]);this._updateClassName=function(){elem.setAttribute("class",this.toString())}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};if(DOMEx[protoProp]=Error[protoProp],classListProto.item=function(i){return this[i]||null},classListProto.contains=function(token){return token+="",-1!==checkTokenAndGetIndex(this,token)},classListProto.add=function(){var tokens=arguments,i=0,l=tokens.length,token,updated=!1;do token=tokens[i]+"",-1===checkTokenAndGetIndex(this,token)&&(this.push(token),updated=!0);while(++i<l);updated&&this._updateClassName()},classListProto.remove=function(){var tokens=arguments,i=0,l=tokens.length,token,updated=!1,index;do for(token=tokens[i]+"",index=checkTokenAndGetIndex(this,token);-1!==index;)this.splice(index,1),updated=!0,index=checkTokenAndGetIndex(this,token);while(++i<l);updated&&this._updateClassName()},classListProto.toggle=function(token,force){token+="";var result=this.contains(token),method=result?force!==!0&&"remove":force!==!1&&"add";return method&&this[method](token),force===!0||force===!1?force:!result},classListProto.toString=function(){return this.join(" ")},objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:!0,configurable:!0};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){-2146823252===ex.number&&(classListPropDesc.enumerable=!1,objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc))}}else objCtr[protoProp].__defineGetter__&&elemCtrProto.__defineGetter__(classListProp,classListGetter)}}(window.self))},{}],promise:[function(require,module,exports){(function(process,global){(function(){"use strict";function lib$es6$promise$utils$$objectOrFunction(x){return"function"==typeof x||"object"==typeof x&&null!==x}function lib$es6$promise$utils$$isFunction(x){return"function"==typeof x}function lib$es6$promise$utils$$isMaybeThenable(x){return"object"==typeof x&&null!==x}function lib$es6$promise$asap$$setScheduler(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn}function lib$es6$promise$asap$$setAsap(asapFn){lib$es6$promise$asap$$asap=asapFn}function lib$es6$promise$asap$$useNextTick(){return function(){process.nextTick(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useVertxTimer(){return function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useMutationObserver(){var iterations=0,observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush),node=document.createTextNode("");return observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}}function lib$es6$promise$asap$$useMessageChannel(){var channel=new MessageChannel;return channel.port1.onmessage=lib$es6$promise$asap$$flush,function(){channel.port2.postMessage(0)}}function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1)}}function lib$es6$promise$asap$$flush(){for(var i=0;lib$es6$promise$asap$$len>i;i+=2){var callback=lib$es6$promise$asap$$queue[i],arg=lib$es6$promise$asap$$queue[i+1];callback(arg),lib$es6$promise$asap$$queue[i]=void 0,lib$es6$promise$asap$$queue[i+1]=void 0}lib$es6$promise$asap$$len=0}function lib$es6$promise$asap$$attemptVertx(){try{var r=require,vertx=r("vertx");return lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext,lib$es6$promise$asap$$useVertxTimer()}catch(e){return lib$es6$promise$asap$$useSetTimeout()}}function lib$es6$promise$$internal$$noop(){}function lib$es6$promise$$internal$$selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function lib$es6$promise$$internal$$cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function lib$es6$promise$$internal$$getThen(promise){try{return promise.then}catch(error){return lib$es6$promise$$internal$$GET_THEN_ERROR.error=error,lib$es6$promise$$internal$$GET_THEN_ERROR}}function lib$es6$promise$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function lib$es6$promise$$internal$$handleForeignThenable(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=!1,error=lib$es6$promise$$internal$$tryThen(then,thenable,function(value){sealed||(sealed=!0,thenable!==value?lib$es6$promise$$internal$$resolve(promise,value):lib$es6$promise$$internal$$fulfill(promise,value))},function(reason){sealed||(sealed=!0,lib$es6$promise$$internal$$reject(promise,reason))},"Settle: "+(promise._label||" unknown promise"));!sealed&&error&&(sealed=!0,lib$es6$promise$$internal$$reject(promise,error))},promise)}function lib$es6$promise$$internal$$handleOwnThenable(promise,thenable){thenable._state===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,thenable._result):thenable._state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,thenable._result):lib$es6$promise$$internal$$subscribe(thenable,void 0,function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor)lib$es6$promise$$internal$$handleOwnThenable(promise,maybeThenable);else{var then=lib$es6$promise$$internal$$getThen(maybeThenable);then===lib$es6$promise$$internal$$GET_THEN_ERROR?lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error):void 0===then?lib$es6$promise$$internal$$fulfill(promise,maybeThenable):lib$es6$promise$utils$$isFunction(then)?lib$es6$promise$$internal$$handleForeignThenable(promise,maybeThenable,then):lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}}function lib$es6$promise$$internal$$resolve(promise,value){promise===value?lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$selfFulfillment()):lib$es6$promise$utils$$objectOrFunction(value)?lib$es6$promise$$internal$$handleMaybeThenable(promise,value):lib$es6$promise$$internal$$fulfill(promise,value)}function lib$es6$promise$$internal$$publishRejection(promise){promise._onerror&&promise._onerror(promise._result),lib$es6$promise$$internal$$publish(promise)}function lib$es6$promise$$internal$$fulfill(promise,value){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._result=value,promise._state=lib$es6$promise$$internal$$FULFILLED,0!==promise._subscribers.length&&lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise))}function lib$es6$promise$$internal$$reject(promise,reason){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._state=lib$es6$promise$$internal$$REJECTED,promise._result=reason,lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise))}function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers,length=subscribers.length;parent._onerror=null,subscribers[length]=child,subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment,subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection,0===length&&parent._state&&lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent)}function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child,callback,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function lib$es6$promise$$internal$$ErrorObject(){this.error=null}function lib$es6$promise$$internal$$tryCatch(callback,detail){try{return callback(detail)}catch(e){return lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e,lib$es6$promise$$internal$$TRY_CATCH_ERROR}}function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var hasCallback=lib$es6$promise$utils$$isFunction(callback),value,error,succeeded,failed;if(hasCallback){if(value=lib$es6$promise$$internal$$tryCatch(callback,detail),value===lib$es6$promise$$internal$$TRY_CATCH_ERROR?(failed=!0,error=value.error,value=null):succeeded=!0,promise===value)return void lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$cannotReturnOwn())}else value=detail,succeeded=!0;promise._state!==lib$es6$promise$$internal$$PENDING||(hasCallback&&succeeded?lib$es6$promise$$internal$$resolve(promise,value):failed?lib$es6$promise$$internal$$reject(promise,error):settled===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,value):settled===lib$es6$promise$$internal$$REJECTED&&lib$es6$promise$$internal$$reject(promise,value))}function lib$es6$promise$$internal$$initializePromise(promise,resolver){try{resolver(function resolvePromise(value){lib$es6$promise$$internal$$resolve(promise,value)},function rejectPromise(reason){lib$es6$promise$$internal$$reject(promise,reason)})}catch(e){lib$es6$promise$$internal$$reject(promise,e)}}function lib$es6$promise$enumerator$$Enumerator(Constructor,input){var enumerator=this;enumerator._instanceConstructor=Constructor,enumerator.promise=new Constructor(lib$es6$promise$$internal$$noop),enumerator._validateInput(input)?(enumerator._input=input,enumerator.length=input.length,enumerator._remaining=input.length,enumerator._init(),0===enumerator.length?lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result):(enumerator.length=enumerator.length||0,enumerator._enumerate(),0===enumerator._remaining&&lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result))):lib$es6$promise$$internal$$reject(enumerator.promise,enumerator._validationError())}function lib$es6$promise$promise$all$$all(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise}function lib$es6$promise$promise$race$$race(entries){function onFulfillment(value){lib$es6$promise$$internal$$resolve(promise,value)}function onRejection(reason){lib$es6$promise$$internal$$reject(promise,reason)}var Constructor=this,promise=new Constructor(lib$es6$promise$$internal$$noop);if(!lib$es6$promise$utils$$isArray(entries))return lib$es6$promise$$internal$$reject(promise,new TypeError("You must pass an array to race.")),promise;for(var length=entries.length,i=0;promise._state===lib$es6$promise$$internal$$PENDING&&length>i;i++)lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]),void 0,onFulfillment,onRejection);return promise}function lib$es6$promise$promise$resolve$$resolve(object){var Constructor=this;if(object&&"object"==typeof object&&object.constructor===Constructor)return object;var promise=new Constructor(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$resolve(promise,object),promise}function lib$es6$promise$promise$reject$$reject(reason){var Constructor=this,promise=new Constructor(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$reject(promise,reason),promise}function lib$es6$promise$promise$$needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function lib$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function lib$es6$promise$promise$$Promise(resolver){this._id=lib$es6$promise$promise$$counter++,this._state=void 0,this._result=void 0,this._subscribers=[],lib$es6$promise$$internal$$noop!==resolver&&(lib$es6$promise$utils$$isFunction(resolver)||lib$es6$promise$promise$$needsResolver(),this instanceof lib$es6$promise$promise$$Promise||lib$es6$promise$promise$$needsNew(),lib$es6$promise$$internal$$initializePromise(this,resolver))}function lib$es6$promise$polyfill$$polyfill(){var local;if("undefined"!=typeof global)local=global;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;(!P||"[object Promise]"!==Object.prototype.toString.call(P.resolve())||P.cast)&&(local.Promise=lib$es6$promise$promise$$default)}var lib$es6$promise$utils$$_isArray;lib$es6$promise$utils$$_isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)};var lib$es6$promise$utils$$isArray=lib$es6$promise$utils$$_isArray,lib$es6$promise$asap$$len=0,lib$es6$promise$asap$$toString={}.toString,lib$es6$promise$asap$$vertxNext,lib$es6$promise$asap$$customSchedulerFn,lib$es6$promise$asap$$asap=function asap(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback,lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg,lib$es6$promise$asap$$len+=2,2===lib$es6$promise$asap$$len&&(lib$es6$promise$asap$$customSchedulerFn?lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush):lib$es6$promise$asap$$scheduleFlush())},lib$es6$promise$asap$$browserWindow="undefined"!=typeof window?window:void 0,lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{},lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver,lib$es6$promise$asap$$isNode="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),lib$es6$promise$asap$$isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,lib$es6$promise$asap$$queue=new Array(1e3),lib$es6$promise$asap$$scheduleFlush;lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$isNode?lib$es6$promise$asap$$useNextTick():lib$es6$promise$asap$$BrowserMutationObserver?lib$es6$promise$asap$$useMutationObserver():lib$es6$promise$asap$$isWorker?lib$es6$promise$asap$$useMessageChannel():void 0===lib$es6$promise$asap$$browserWindow&&"function"==typeof require?lib$es6$promise$asap$$attemptVertx():lib$es6$promise$asap$$useSetTimeout();var lib$es6$promise$$internal$$PENDING=void 0,lib$es6$promise$$internal$$FULFILLED=1,lib$es6$promise$$internal$$REJECTED=2,lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject,lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject;lib$es6$promise$enumerator$$Enumerator.prototype._validateInput=function(input){return lib$es6$promise$utils$$isArray(input)},lib$es6$promise$enumerator$$Enumerator.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},lib$es6$promise$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length)};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){for(var enumerator=this,length=enumerator.length,promise=enumerator.promise,input=enumerator._input,i=0;promise._state===lib$es6$promise$$internal$$PENDING&&length>i;i++)enumerator._eachEntry(input[i],i)},lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var enumerator=this,c=enumerator._instanceConstructor;lib$es6$promise$utils$$isMaybeThenable(entry)?entry.constructor===c&&entry._state!==lib$es6$promise$$internal$$PENDING?(entry._onerror=null,enumerator._settledAt(entry._state,i,entry._result)):enumerator._willSettleAt(c.resolve(entry),i):(enumerator._remaining--,enumerator._result[i]=entry)},lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var enumerator=this,promise=enumerator.promise;promise._state===lib$es6$promise$$internal$$PENDING&&(enumerator._remaining--,state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,value):enumerator._result[i]=value),0===enumerator._remaining&&lib$es6$promise$$internal$$fulfill(promise,enumerator._result)},lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,void 0,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value)},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason)})};var lib$es6$promise$promise$all$$default=lib$es6$promise$promise$all$$all,lib$es6$promise$promise$race$$default=lib$es6$promise$promise$race$$race,lib$es6$promise$promise$resolve$$default=lib$es6$promise$promise$resolve$$resolve,lib$es6$promise$promise$reject$$default=lib$es6$promise$promise$reject$$reject,lib$es6$promise$promise$$counter=0,lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;lib$es6$promise$promise$$Promise.all=lib$es6$promise$promise$all$$default,lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default,lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default,lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default,lib$es6$promise$promise$$Promise._setScheduler=lib$es6$promise$asap$$setScheduler,lib$es6$promise$promise$$Promise._setAsap=lib$es6$promise$asap$$setAsap,lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap,lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var parent=this,state=parent._state;if(state===lib$es6$promise$$internal$$FULFILLED&&!onFulfillment||state===lib$es6$promise$$internal$$REJECTED&&!onRejection)return this;var child=new this.constructor(lib$es6$promise$$internal$$noop),result=parent._result;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,result)})}else lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection);return child},"catch":function(onRejection){return this.then(null,onRejection)}};var lib$es6$promise$polyfill$$default=lib$es6$promise$polyfill$$polyfill,lib$es6$promise$umd$$ES6Promise={Promise:lib$es6$promise$promise$$default,polyfill:lib$es6$promise$polyfill$$default};"function"==typeof define&&define.amd?define(function(){return lib$es6$promise$umd$$ES6Promise}):"undefined"!=typeof module&&module.exports?module.exports=lib$es6$promise$umd$$ES6Promise:"undefined"!=typeof this&&(this.ES6Promise=lib$es6$promise$umd$$ES6Promise),lib$es6$promise$polyfill$$default()}).call(this)}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:13}]},{},[23]);